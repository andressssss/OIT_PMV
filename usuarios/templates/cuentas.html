{% extends 'base.html' %}
{% load static %}
{% load icons %}

{% block content %}
  {% if not can_view %}
    <div class="d-flex justify-content-center align-items-center" style="height: 60vh;">
      <div class="alert alert-danger d-flex align-items-center shadow-lg rounded-3 p-4" role="alert">
        <i class="bi bi-exclamation-triangle-fill me-3 fs-3"></i>
        <div class="fw-semibold fs-5">No tiene permisos para acceder a este contenido</div>
      </div>
    </div>
  {% else %}
<main class="container py-5">
    <section class="card card-body shadow-sm p-4">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center pb-4">
                <h1 class="display-5">Gestión de perfiles cuentas</h1>
                {% if can_edit %}
                <div>
                  <a href="#" class="btn btn-primary me-2" onclick="Swal.fire({
                    icon: 'warning',
                    title: 'Función no disponible',
                    text: 'Esta función aún no está disponible.',
                    confirmButtonText: 'Entendido'
                    })" title="Crear perfil cuentas">
                    {% icon 'plus' %}
                  </a>
                </div>
                {% endif %}
            </div>
            <div class="table-responsive">
                <table id="cuentas_table" class="table table-hover table-bordered align-middle">
                    <thead class="table-secondary text-center">
                    <tr>
                      {% if can_edit %}
                      <th></th>
                      {% endif %}
                        <th>Nombre</th>
                        <th>Apellido</th>
                        <th>Teléfono</th>
                        <th>Dirección</th>
                        <th>Mail</th>
                        <th>Fecha nacimiento</th>
                        <th>Estado</th>
                    </tr>
                </thead>
                <tbody>
                    {% for cuenta in cuentas %}
                    <tr>
                      {% if can_edit %}
                      <td>
                        <a href="{% url 'cuentas_detalle' cuenta.id %}" class="btn btn-primary btn-sm" data-toggle="tooltip" title="Editar">{% icon 'edit' %}</a>
                      </td>
                      {% endif %}
                        <td>{{ cuenta.perfil.nom}}</td>
                        <td>{{ cuenta.perfil.apelli}}</td>
                        <td>{{ cuenta.perfil.tele}}</td>
                        <td>{{ cuenta.perfil.dire}}</td>
                        <td>{{ cuenta.perfil.mail}}</td>
                        <td>{{ cuenta.perfil.fecha_naci}}</td>
                        <td>{{ cuenta.esta }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        </div>
    </div>
    </section>
</main>
{% endif %}
{% endblock %}