{% extends 'base.html' %}

{% block content %}
<main class="container py-5">
    <section class="card card-body shadow-sm p-4">
        <h2 class="text-center mb-4">Panel del Instructor - Ficha {{ ficha.num}} - Fase {{ fase.fase }}</h2>

        <!-- NavPills -->
        <ul class="nav nav-tabs mb-4 nav-fill" id="instructorTab" role="tablist">
            <li class="nav-item" role="presentation">
                <a class="nav-link active" id="portfolioFicha-tab" data-bs-toggle="pill" href="#portfolioFicha" role="tab" aria-controls="portfolioFicha" aria-selected="true">Portafolio Ficha {{ ficha.num }}</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="portfolioAprendices-tab" data-bs-toggle="pill" href="#portfolioAprendices" role="tab" aria-controls="portfolioAprendices" aria-selected="false">Portafolio Aprendices</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="calificaciones-tab" data-bs-toggle="pill" href="#calificaciones" role="tab" aria-controls="calificaciones" aria-selected="false">Calificaciones</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="aprendices-tab" data-bs-toggle="pill" href="#aprendicespes" role="tab" aria-controls="aprendices" aria-selected="false">Aprendices</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="reportes-tab" data-bs-toggle="pill" href="#reportes" role="tab" aria-controls="reportes" aria-selected="false">Reportes</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="cronograma-tab" data-bs-toggle="pill" href="#cronograma" role="tab" aria-controls="cronograma" aria-selected="false">Cronograma</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="inasistencias-tab" data-bs-toggle="pill" href="#inasistencias" role="tab" aria-controls="inasistencias" aria-selected="false">Inasistencias</a>
            </li>
        </ul>

        <!-- Contenido de las Pills -->
        <div class="tab-content" id="instructorTabContent">
            <!-- Portafolio Ficha -->
            <div class="tab-pane fade show active" id="portfolioFicha" role="tabpanel" aria-labelledby="portfolioFicha-tab">
                <p>En esta seccion podra administrar y modificar el contenido del portafolio asociado a la ficha.</p>
                
                <script>
                    document.addEventListener("DOMContentLoaded", (event) => {
    const tree = new mar10.Wunderbaum({
        element: document.getElementById("demo-tree"),
        source: {
              url: "{% url 'get_tree_instructor' %}",
          },
    });
});

                </script>
                <div class="row">
                    <!-- Sección para cargar documentos -->
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5>Portafolio</h5>
                            </div>
                            <div class="card-body">
                                <div id="demo-tree"></div>

                            </div>
                        </div>
                        <div class="card mt-3">
                            <div class="card-header">
                                <h5>Cargar Documentos</h5>
                            </div>
                            <div class="card-body">
                                <form>
                                    <div class="mb-3">
                                        <label for="uploadFile" class="form-label">Seleccionar archivo</label>
                                        <input type="file" class="form-control" id="uploadFile">
                                    </div>
                                    <button type="submit" class="btn btn-primary">Subir</button>
                                </form>
                            </div>
                        </div>
                    </div>
            
                    <!-- Sección para descargar documentos -->
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5>Descargar Documentos</h5>
                            </div>
                            <div class="card-body">
                                <ul class="list-group">
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        Documento 1
                                        <a href="#" class="btn btn-sm btn-secondary">Descargar</a>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        Documento 2
                                        <a href="#" class="btn btn-sm btn-secondary">Descargar</a>
                                    </li>
                                    <!-- Agrega más elementos según sea necesario -->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            

            <!-- Portafolio Aprendices -->
            <div class="tab-pane fade" id="portfolioAprendices" role="tabpanel" aria-labelledby="portfolioAprendices-tab">
                <h4>Portafolio Aprendices</h4>
                <p>Aquí podrás gestionar el portafolio de los aprendices y su progreso.</p>
            </div>

            <!-- Calificaciones -->
            <div class="tab-pane fade" id="calificaciones" role="tabpanel" aria-labelledby="calificaciones-tab">
                <h4>Calificaciones</h4>
                <p>Aquí podrás ingresar y revisar las calificaciones de los aprendices.</p>
            </div>

            <!-- Aprendices -->
            <div class="tab-pane fade" id="aprendicespes" role="tabpanel" aria-labelledby="aprendices-tab">
                <h4>Aprendices</h4>
                <p>Aquí podrás ver y gestionar la lista de aprendices asignados al curso.</p>

            </div>

            <!-- Reportes -->
            <div class="tab-pane fade" id="reportes" role="tabpanel" aria-labelledby="reportes-tab">
                <h4>Reportes</h4>
                <p>Aquí podrás generar reportes sobre el desempeño de los aprendices.</p>
            </div>

            <!-- Cronograma -->
            <div class="tab-pane fade" id="cronograma" role="tabpanel" aria-labelledby="cronograma-tab">
                <h4>Cronograma</h4>
                <p>Aquí podrás consultar y gestionar el cronograma de actividades.</p>
                <div class="card shadow-sm my-4">
                    <div class="card-body">
                        <!-- Botones superiores -->
                        <div class="d-flex justify-content-between mb-3">
                            <a href="{% url 'crear_actividad' ficha.id %}" class="btn btn-success btn-lg">
                                <i class="bi bi-plus"></i> Crear Actividad
                            </a>
                            <button class="btn btn-secondary">Ver calendario</button>
                            <button class="btn btn-success">Publicar actividades de fase</button>
                        </div>
                        <!-- Tabla -->
                        <div class="table-responsive">
                            <table class="table table-bordered align-middle">
                                <thead class="table-primary text-center">
                                    <tr>
                                        <th>Nombre</th>
                                        <th>Fecha apertura</th>
                                        <th>Fecha cierre</th>
                                        <th>Fecha calificación</th>
                                        <th>Fase</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for actividad in actividades %}
                                    <tr>
                                        <td>{{ actividad.acti.nom}}</td>
                                        <td>{{ actividad.crono.fecha_ini_acti|date:"d/m/Y" }}</td>
                                        <td>{{ actividad.crono.fecha_fin_acti|date:"d/m/Y" }}</td>
                                        <td>{{ actividad.crono.fecha_ini_cali|date:"d/m/Y" }}</td>
                                        <td>{{ actividad.acti.fase }}</td>
                                        <td>
                                            <a href="#" class="btn btn-info btn-sm">Detalle</a>
                                            <a href="#" class="btn btn-warning btn-sm">Editar</a>
                                            <a href="#" class="btn btn-danger btn-sm">Desactivar</a>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                
                        <!-- Botón inferior y etiquetas -->
                        <div class="d-flex justify-content-between align-items-center mt-3">
                            <button class="btn btn-danger">Cerrar fase</button>
                            <div>
                                <span class="text-danger">Pendiente: Faltan X RAPS para la fase X</span><br>
                                <span class="text-danger">Estado: Incompleto</span>
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>

            <!-- Inasistencias -->
            <div class="tab-pane fade" id="inasistencias" role="tabpanel" aria-labelledby="inasistencias-tab">
                <h4>Inasistencias</h4>
                <p>Aquí podrás registrar y revisar las inasistencias de los aprendices.</p>
            </div>
        </div>
    </section>
</main>

{% endblock %}